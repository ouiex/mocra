name = "lunaler_rpa"

[api]
port = 8905

[db]
url = "postgres://eason:Qaz.123456@localhost:5433/crawler"
database_schema = "base"
pool_size = 50

[download_config]
# Increased pool size for 2000 concurrent requests
pool_size = 800
downloader_expire = 3600
timeout = 30
rate_limit = 1
enable_cache = false
enable_locker = false
enable_rate_limit = false
cache_ttl = 60
wss_timeout = 60


[cache]
ttl = 60

[cache.redis]
redis_host = "127.0.0.1"
redis_port = 6379
redis_db = 0
pool_size = 200

[cookie]
redis_host = "127.0.0.1"
redis_port = 6379
redis_db = 0
pool_size = 50

[proxy.pool_config]
min_size = 1
max_size = 20
max_errors = 3
health_check_interval_secs = 60
refill_threshold = 0.3

[[proxy.direct]]
name = "local_https_proxy"
url = "https://127.0.0.1:8888"
rate_limit = 50

[[proxy.direct]]
name = "local_http_proxy"
url = "http://127.0.0.1:8080"
rate_limit = 50

[[proxy.direct]]
name = "local_wss_proxy"
url = "wss://127.0.0.1:8888"
rate_limit = 50


[crawler]
request_max_retries = 1
task_max_errors = 100
module_max_errors = 10
module_locker_ttl = 5
task_concurrency = 1000
idle_stop_secs = 0

[scheduler]
refresh_interval_secs = 60
max_staleness_secs = 120

[channel_config]
minid_time = 12
capacity = 20000
queue_codec = "msgpack"
compression_threshold = 1048576
batch_concurrency = 500


[channel_config.compensator]
redis_host = "127.0.0.1"
redis_port = 6379
redis_db = 0
pool_size = 100

[channel_config.blob_storage]
path = "tmp/blob_storage"


[logger]
enable = true
level = "debug"

[[logger.outputs]]
type = "console"

[[logger.outputs]]
type = "file"
path = "logs/lunaler_rpa.log"
